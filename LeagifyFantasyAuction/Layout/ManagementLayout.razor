@inherits LayoutComponentBase
@inject IJSRuntime JSRuntime
@inject NavigationManager Navigation

<style>
    .management-layout { display: flex; flex-direction: column; min-height: 100vh; }
    .management-header { background: #0078d4; color: white; padding: 12px 20px; display: flex; justify-content: space-between; align-items: center; }
    .management-header h4 { margin: 0; font-size: 18px; font-weight: 600; }
    .management-main { display: flex; flex: 1; }
    .management-content { flex: 1; padding: 20px; }
    .management-footer { background: #f5f5f5; padding: 8px 20px; font-size: 12px; color: #666; text-align: center; }
    .logout-btn { background: transparent; border: 1px solid rgba(255,255,255,0.5); color: white; padding: 6px 12px; border-radius: 4px; cursor: pointer; }
    .logout-btn:hover { background: rgba(255,255,255,0.1); }
</style>

<FluentDesignTheme />
<FluentDialogProvider />
<FluentTooltipProvider />
<FluentMessageBarProvider />

<div class="management-layout">
    <header class="management-header">
        <h4>Leagify Management</h4>
        <button class="logout-btn" @onclick="LogoutAsync">
            ðŸšª Logout
        </button>
    </header>
    <div class="management-main">
        <ManagementNavMenu />
        <main class="management-content">
            <ErrorBoundary>
                <ChildContent>
                    @Body
                </ChildContent>
                <ErrorContent Context="ex">
                    <div class="alert alert-danger" role="alert">
                        @ex.Message
                    </div>
                </ErrorContent>
            </ErrorBoundary>
        </main>
    </div>
    <footer class="management-footer">
        Management Interface - Token expires at @GetTokenExpiration()
    </footer>
</div>

@code {
    private async Task LogoutAsync()
    {
        await JSRuntime.InvokeVoidAsync("localStorage.removeItem", "managementToken");
        await JSRuntime.InvokeVoidAsync("localStorage.removeItem", "tokenExpiration");
        
        Navigation.NavigateTo("/management/login", true);
    }

    private string GetTokenExpiration()
    {
        // This would get the expiration from localStorage in a real implementation
        return "Not implemented";
    }
}